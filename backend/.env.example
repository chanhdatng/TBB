# Analytics Service Environment Configuration
# Copy to .env.production and fill with real values
# NEVER commit .env.production to git (add to .gitignore)

# ============================================================
# Environment & Server
# ============================================================
NODE_ENV=production
PORT=3000

# ============================================================
# JWT Authentication (CRITICAL: Change these in production)
# ============================================================
# Generate secure key: openssl rand -base64 32
JWT_SECRET=generate-a-strong-random-secret-at-least-32-characters
JWT_EXPIRES_IN=24h

# ============================================================
# Admin Credentials (CRITICAL: Change in production)
# ============================================================
ADMIN_USERNAME=your_admin_username
ADMIN_PASSWORD=your_secure_password_here

# ============================================================
# Firebase Configuration (Required for analytics)
# ============================================================
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY_ID=your-key-id
FIREBASE_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEA...\n-----END RSA PRIVATE KEY-----"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com
FIREBASE_CLIENT_ID=your-client-id
FIREBASE_AUTH_URI=https://accounts.google.com/o/oauth2/auth
FIREBASE_TOKEN_URI=https://oauth2.googleapis.com/token
FIREBASE_AUTH_PROVIDER_X509_CERT_URL=https://www.googleapis.com/oauth2/v1/certs
FIREBASE_CLIENT_X509_CERT_URL=https://www.googleapis.com/robot/v1/metadata/x509/...

# ============================================================
# Redis Configuration (for caching & distributed locking)
# ============================================================
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=redis-password-here
REDIS_DB=0

# ============================================================
# Rate Limiting
# ============================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=5

# ============================================================
# CORS Configuration (comma-separated for multiple origins)
# ============================================================
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# ============================================================
# Logging & Monitoring
# ============================================================
LOG_LEVEL=info
LOG_DIR=/var/log/analytics-service
SENTRY_DSN=https://key@sentry.io/project-id
DATADOG_ENABLED=false

# ============================================================
# Job Scheduling (Vietnam timezone UTC+7)
# ============================================================
TIMEZONE=Asia/Ho_Chi_Minh
DAILY_ANALYTICS_ENABLED=true
DAILY_ANALYTICS_CRON=0 0 * * *
MONTHLY_ANALYTICS_ENABLED=true
MONTHLY_ANALYTICS_CRON=0 1 1 * *
BACKUP_JOB_ENABLED=true
BACKUP_JOB_CRON=0 23 * * *

# ============================================================
# Job Execution Parameters
# ============================================================
JOB_MAX_RETRIES=3
JOB_RETRY_DELAY=10000
JOB_TIMEOUT=60000

# ============================================================
# Backup Configuration
# ============================================================
BACKUP_PATH=/var/backups/analytics-service
BACKUP_RETENTION_DAYS=7

# ============================================================
# Performance Tuning
# ============================================================
NODE_MAX_OLD_SPACE_SIZE=1024
DB_MAX_CONCURRENT=10
REDIS_POOL_SIZE=10

# ============================================================
# Data Retention
# ============================================================
METRICS_RETENTION_DAYS=7
DAILY_STATS_RETENTION_DAYS=30
MONTHLY_STATS_RETENTION_YEARS=1

# ============================================================
# Feature Flags
# ============================================================
ENABLE_ANALYTICS_COMPUTATION=true
ENABLE_BACKUP_COMPRESSION=true
ENABLE_DISTRIBUTED_LOCKING=true
